---
title: Что вы знаете о Module Federation?
keywords: module federation
complexity: 2
links: ✅
content: ✅
---

> Microfrontends — архитектурный паттерн для фронтенда, в котором независимо доставляемые клиентские компоненты в браузер объединяются в единое целое.
> 
> _Павел Черторогов_

## Преимущества микрофронтендов над монолитами

- Каждая команда максимально изолирована и имеет свою зону ответственности. Нет проблем с мерджем изменений;
- Сокращение цикла поставки — упрощение CI/CD, интеграционного тестирования, исправление ошибок;
- Снижение сложности проекта — не нужно лезть в другую часть системы;
- Изоляций ошибок — сломался один из микрофронтендов, остальные работают.

## Какие микрофронтенд-подходы есть?

- Server Side Includes (не применима к SPA),
- IFrames (проблемы с модальными окнами, проблемы с SEO, перезагрузка контента, проблемы с CPU),
- Web Components (проблема с SSR, проблемы с SPA),
- Linked Pages (на одном адресе — одно приложение, при переходе пользователь заново грузит ресурсы),
- Single-SPA (сложность с подключением assets, при переходе пользователь заново грузит ресурсы, микрофронтенд в микрофронтенде — нет) 
- DLLPlugins (нужен ребилд при изменении отдельных микрофронтов)
- Externals (нет решения для shared-зависимостей)

Решение, которое решает проблему билда, web-перфоманса и shared-зависимостей - Module Federation.

## Module Federation

Module federation - это webpack-плагин, который позволяет одному webpack-приложению динамически подгружать chunk'и (css, js, images, fonts...) из bundle другого webpack-приложения **в рантайме**.

Что может Module Federation:
- Отслеживает общие зависимости и не будет повторно грузить библиотеку, которая используется в нескольких микрофронтендах;
- Могут деплоиться независимо - standalone;
- Сборка происходит налету в браузере;
- Нет перезагрузки при переходе между микрофронтендами;
- Не нужно пересобирать основное приложение;
- Оркестрация на стороне клиента.

Для SSR нужно использовать webpack, как браузер, только на стороне сервера.

## ModuleFederationPlugin

- exposes - модули, которые будут доступны потребителем,
- remotes - объект, который описывает подключаемые из других контейнеров модули,
- shared - описывает shared-модули.

`singleton: true` - гарантирует, что во время выполнения создается только один экземпляр модуля.

### Дополнительно
- [Павел Черторогов — Революция в микрофронтендах, module federation, Webpack 5](https://youtu.be/pcY8-pDGLkI),
- [Module Federation in Webpack 5 - Tobias Koppers](https://youtu.be/gmUm7CTsNhk) и [слайды](https://github.com/sokra/slides/blob/master/content/ModuleFederationWebpack5.md).